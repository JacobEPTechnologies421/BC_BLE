<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/hybridwebview.js"></script>
    <title>BoatControl</title>
    <script>
      function LogMessage(msg) {
          var messageLog = document.getElementById("messageLog");
          messageLog.value += '\r\n' + msg;
      }

      window.addEventListener(
          "HybridWebViewMessageReceived",
          function (e) {
              LogMessage("Raw message: " + e.detail.message);
          });

      function AddNumbers(a, b) {
          var result = {
              "result": a + b,
              "operationName": "Addition"
          };
          return result;
      }

      var count = 0;

      async function EvaluateMeWithParamsAndAsyncReturn(s1, s2) {
          const response = await fetch("/asyncdata.txt");
          if (!response.ok) {
              throw new Error(`HTTP error: ${response.status}`);
          }
          var jsonData = await response.json();

          jsonData[s1] = s2;

          const msg = 'JSON data is available: ' + JSON.stringify(jsonData);
          window.HybridWebView.SendRawMessage(msg)

          return jsonData;
      }

      async function InvokeDoSyncWork() {
          LogMessage("Invoking DoSyncWork");
          await window.HybridWebView.InvokeDotNet('DoSyncWork');
          LogMessage("Invoked DoSyncWork");
      }

      async function InvokeDoSyncWorkParams() {
          LogMessage("Invoking DoSyncWorkParams");
          await window.HybridWebView.InvokeDotNet('DoSyncWorkParams', [123, 'hello']);
          LogMessage("Invoked DoSyncWorkParams");
      }

      async function InvokeDoSyncWorkReturn() {
          LogMessage("Invoking DoSyncWorkReturn");
          const retValue = await window.HybridWebView.InvokeDotNet('DoSyncWorkReturn');
          LogMessage("Invoked DoSyncWorkReturn, return value: " + retValue);
      }

      async function InvokeDoSyncWorkParamsReturn() {
          LogMessage("Invoking DoSyncWorkParamsReturn");
          const retValue = await window.HybridWebView.InvokeDotNet('DoSyncWorkParamsReturn', [123, 'hello']);
          LogMessage("Invoked DoSyncWorkParamsReturn, return value: message=" + retValue.Message + ", value=" + retValue.Value);
      }

  </script>
    <script type="module" crossorigin src="/assets/index-DW78O_wL.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-Bt_Zdzpl.css">
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
